<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
</head>
<body>
<div class="container">
    <h2>로그인</h2>

    <div class="registform">
        <form id="registform">
            아이디 : <input type="text" id="user_id" value="nakja@ddd.com"> <br>
            패스워드 : <input type="text" id="user_pass" value="123456"> <br>
            <input type="button" id="registBtn" value="로그인">
        </form>
    </div>
</div>    
</body>
<script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>
<script>
  var firebaseConfig = {
    apiKey: "AIzaSyCc7tn-ruwkbahXleJpgMI0pWWLTZBQcgg",
    authDomain: "noserver01-6d697.firebaseapp.com",
    projectId: "noserver01-6d697",
    storageBucket: "noserver01-6d697.appspot.com",
    messagingSenderId: "39784331052",
    appId: "1:39784331052:web:be05ae74d100fe00e05e89"
  };
  firebase.initializeApp(firebaseConfig);
</script>
<script>
    const db = firebase.firestore();
    const storage = firebase.storage();

    $('#registBtn').click(function(){
        var id = $('#user_id').val();
        var pass = $('#user_pass').val();

        firebase.auth().signInWithEmailAndPassword(id, pass)
        .then((result)=>{
            alert("로그인 성공임");
            console.log(result);
            console.log(result.user.uid);
            firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION);
        })
        .catch((err)=>{
            alert("로그인 실패임");
            console.error(err);
        });
    });

    //로그인 확인용
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {            
            console.log("로긴됨", user);
        } else {
            console.log("로긴안됨");
        }
    });
</script>
</html>